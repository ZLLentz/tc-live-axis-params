<?xml version="1.0" encoding="utf-8"?>
<TcPlcObject Version="1.1.0.1" ProductVersion="3.1.4022.12">
  <POU Name="FB_AxisReadCoE" Id="{111a1f06-3939-4985-b7dd-5290f17e9dec}" SpecialFunc="None">
    <Declaration><![CDATA[FUNCTION_BLOCK FB_AxisReadCoE
VAR_INPUT
	bExecute: BOOL;
	bReset: BOOL;
	stHardware: ST_AxisHardware
END_VAR
VAR_IN_OUT
	stConfig: ST_AxisParams;
	Axis: AXIS_REF;
END_VAR
VAR_OUTPUT
	bValid: BOOL;
	bBusy: BOOL;
	bError: BOOL;
	iErrorID: UDINT;
END_VAR
VAR
	fbRead70x1: FB_AxisRead70x1;
	fbRead5042: FB_AxisRead5042;
{% endfor %}
END_VAR
]]></Declaration>
    <Implementation>
      <ST><![CDATA[
{% for item in drive_params %}
{% if item.multi_channel	
	CASE stHardware.drive_ref.nDriveNo OF
	END_CASE
	{{ item.fb_read }}(bExecute:=bInnerExec,
		stDriveRef:=stHardware.drive_ref,
		nindex:={{ item.nindex }},
		nSubIndex:={{ item.subindex }},
		pDstBuf:=ADR(stConfig.{{ item.stConfig }}),
		cbBufLen:=SIZEOF(stConfig.{{ item.stConfig }}));
{% endfor %}
END_IF
IF stHardware.enc_type > 0 THEN
{% for item in enc_params %}
	{{ item.fb_read }}(bExecute:=bInnerExec,
		stDriveRef:=stHardware.enc_ref,
		nindex:={{ item.nindex }},
		nSubIndex:={{ item.subindex }},
		pDstBuf:=ADR(stConfig.{{ item.stConfig }}),
		cbBufLen:=SIZEOF(stConfig.{{ item.stConfig }}));
{% endfor %}
END_IF
]]></ST>
    </Implementation>
    <LineIds Name="FB_AxisReadCoE">
      <LineId Id="9" Count="0" />
    </LineIds>
  </POU>
</TcPlcObject>
